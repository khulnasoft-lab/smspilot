window.smspilot={aos:()=>{AOS.init()},active:()=>{"//"+location.hostname+location.pathname==site_url+"/dashboard"?$('li [smspilot-nav][href^="//'+location.hostname+location.pathname+'?"]').addClass("active"):$('li [smspilot-nav][href^="//'+location.hostname+location.pathname+'"]').addClass("active")},cookies:()=>{window.cookieconsent.initialise({theme:"classic",position:"bottom-left",content:{message:lang_cookieconsent_message,link:lang_cookieconsent_link}})},action:()=>{$(document).on("click","[smspilot-action]",function(e){switch(e.preventDefault(),$(this).attr("smspilot-action")){case"mollie":$.post(site_url+"/ajax/update/payment",{id:$(this).attr("mollie-package"),provider:"mollie"},e=>{try{200==(e=JSON.parse(e)).status?(alert.success(e.message),setTimeout(()=>{smspilot.redirect(e.data)},3e3)):alert.danger(e.message)}catch(e){alert.danger(lang_response_went_wrong)}});break;case"suspend":var t=$(this).attr("user-id");iziToast.question({title:lang_suspend_user_title,message:lang_suspend_user_desc,titleLineHeight:"25px",backgroundColor:"linear-gradient(30deg, rgb(197, 23, 23), rgb(255, 125, 33))",position:"center",icon:!1,drag:!1,timeout:!1,close:!1,overlay:!0,layout:1,zindex:1024,buttons:[['<button class="text-white">'+lang_btn_confirm+"</button>",function(e,a,n,r,s){$.ajax({url:site_url+"/ajax/update/admin.suspend",type:"POST",data:"id="+t,beforeSend:function(){e.hide({transitionOut:"fadeOut"},a,"button")},success:function(e){try{200==(e=JSON.parse(e)).status?(smspilot.tables("administration.users"),alert.success(e.message)):alert.danger(e.message)}catch(e){alert.danger(lang_response_went_wrong)}}})},!0],['<button class="text-white">'+lang_btn_cancel+"</button>",function(e,t,a,n){e.hide({transitionOut:"fadeOut"},t,"button")}]]});break;case"unsuspend":t=$(this).attr("user-id");iziToast.question({title:lang_unsuspend_user_title,message:lang_unsuspend_user_desc,titleLineHeight:"25px",backgroundColor:"rgba(0, 0, 0, 0) linear-gradient(30deg, rgb(96, 166, 47), rgb(64, 111, 63)) repeat scroll 0% 0%",position:"center",icon:!1,drag:!1,timeout:!1,close:!1,overlay:!0,layout:1,zindex:1024,buttons:[['<button class="text-white">'+lang_btn_confirm+"</button>",function(e,a,n,r,s){$.ajax({url:site_url+"/ajax/update/admin.unsuspend",type:"POST",data:"id="+t,beforeSend:function(){e.hide({transitionOut:"fadeOut"},a,"button")},success:function(e){try{200==(e=JSON.parse(e)).status?(smspilot.tables("administration.users"),alert.success(e.message)):alert.danger(e.message)}catch(e){alert.danger(lang_response_went_wrong)}}})},!0],['<button class="text-white">'+lang_btn_cancel+"</button>",function(e,t,a,n){e.hide({transitionOut:"fadeOut"},t,"button")}]]});break;case"impersonate":t=$(this).attr("user-id");iziToast.question({title:lang_alert_impersonate_title,message:lang_alert_impersonate_desc,titleLineHeight:"25px",backgroundColor:"linear-gradient(30deg, rgb(179, 103, 24), rgb(243, 168, 32))",position:"center",icon:!1,drag:!1,timeout:!1,close:!1,overlay:!0,layout:1,zindex:1024,buttons:[['<button class="text-white">'+lang_btn_confirm+"</button>",function(e,a,n,r,s){$.ajax({url:site_url+"/ajax/index/impersonate",type:"POST",data:"id="+t,beforeSend:function(){e.hide({transitionOut:"fadeOut"},a,"button")},success:function(e){try{200==(e=JSON.parse(e)).status?alert.success(e.message,!0):alert.danger(e.message)}catch(e){alert.danger(lang_response_went_wrong)}}})},!0],['<button class="text-white">'+lang_btn_cancel+"</button>",function(e,t,a,n){e.hide({transitionOut:"fadeOut"},t,"button")}]]});break;case"exit":t=$(this).attr("user-id");iziToast.question({title:lang_alert_impersonateexit_title,message:lang_alert_impersonateexit_desc,titleLineHeight:"25px",backgroundColor:"linear-gradient(30deg, rgb(16, 107, 181), rgb(79, 193, 238))",position:"center",icon:!1,drag:!1,timeout:!1,close:!1,overlay:!0,layout:1,zindex:1024,buttons:[['<button class="text-white">'+lang_btn_confirm+"</button>",function(e,a,n,r,s){$.ajax({url:site_url+"/ajax/index/exit",type:"POST",data:"id="+t,beforeSend:function(){e.hide({transitionOut:"fadeOut"},a,"button")},success:function(e){try{200==(e=JSON.parse(e)).status?alert.success(e.message,!0):alert.danger(e.message)}catch(e){alert.danger(lang_response_went_wrong)}}})},!0],['<button class="text-white">'+lang_btn_cancel+"</button>",function(e,t,a,n){e.hide({transitionOut:"fadeOut"},t,"button")}]]});break;case"logout":$.get(site_url+"/ajax/index/logout",e=>{try{200==(e=JSON.parse(e)).status?alert.success(e.message,!0):alert.warning(e.message,!0)}catch(e){alert.danger(lang_response_went_wrong)}});break;default:alert.danger(lang_unknown_action_method)}})},translate:()=>{$("body").append('<ul class="mfb-component--br mfb-slidein-spring" data-mfb-toggle="hover">\n                <li class="mfb-component__wrap">\n                    <a href="#" class="mfb-component__button--main bg-dark" smspilot-scroll-top>\n                        <i class="mfb-component__main-icon--resting la la-language la-lg text-white"></i>\n                        <i class="mfb-component__main-icon--active la la-arrow-up la-lg text-white"></i>\n                    </a>\n                    <ul class="mfb-component__list" smspilot-languages></ul>\n                </li>\n            </ul>').ready(()=>{$.get(site_url+"/ajax/index/languages",function(e){try{e=JSON.parse(e);$("[smspilot-languages]").html(e.data)}catch(e){alert.danger(lang_response_went_wrong)}}),$(document).on("click","[smspilot-language]",function(e){e.preventDefault(),$.get(site_url+"/ajax/index/language/"+$(this).attr("smspilot-language"),function(e){try{200==(e=JSON.parse(e)).status?alert.success(e.message,!0):alert.warning(e.message)}catch(e){alert.danger(lang_response_went_wrong)}})}),smspilot.scroll()})},codeflask:()=>{$("[smspilot-codeflask]").length&&(window.codeflask=new CodeFlask("[smspilot-codeflask]",{lineNumbers:!1}),codeflask.updateCode(he.decode(codeflask.getCode())))},autonavbar:()=>{$(".navbar-right").width()>750&&($("header div:first").addClass("container-fluid"),$("header div .navbar div:first").addClass("container-fluid"),$("header div:first").removeClass("container"),$("header div .navbar div:first").removeClass("container"))},creditcard:()=>{$("smspilot-creditcard").length&&$("[smspilot-form]").card({container:"smspilot-creditcard"})},clipboard:(e=!1)=>{e?window.clipboard&&clipboard.destroy():$("[smspilot-clipboard]").length&&(window.clipboard=new ClipboardJS("[smspilot-clipboard]"),clipboard.on("success",e=>{e.clearSelection(),alert.success(lang_copy_data)}))},disabled:(e=!0)=>{e?$(".form-control, .input, button[type=submit]").attr("disabled",""):$(".form-control, .input, button[type=submit]").removeAttr("disabled")},scroll:()=>{$("[smspilot-scroll-top]").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:"0px"},300)}),$("[smspilot-scroll]").on("click",function(e){e.preventDefault(),$(window).stop(!0).scrollTo(this.hash)})},qrcode:(e,t,a)=>{new QRCode("smspilot-qrcode",{text:e,width:t,height:a})},redirect:e=>{window.location.href=e},ripple:()=>{Waves.init(),Waves.attach(".btn")},iframe:()=>{$("[smspilot-iframe]").length&&$("[smspilot-iframe]").each(function(e){$(this).attr("src",$(this).attr("smspilot-iframe")),$(this).on("load",function(){setTimeout(()=>{$(this).iFrameResize({resizeFrom:"child"})},500)})})},datepicker:()=>{if($("[smspilot-datepicker]").length){var e=[];e[lang_date_today]=[moment(),moment()],e[lang_date_yesterday]=[moment().subtract(1,"days"),moment().subtract(1,"days")],e[lang_date_7days]=[moment().subtract(6,"days"),moment()],e[lang_date_30days]=[moment().subtract(29,"days"),moment()],e[lang_date_month]=[moment().startOf("month"),moment().endOf("month")],e[lang_date_lmonth]=[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],$(".daterangepicker").remove(),$("[smspilot-datepicker]").daterangepicker({opens:"left",startDate:moment().subtract(29,"days"),endDate:moment(),ranges:e,locale:{customRangeLabel:lang_date_custom}})}$("[smspilot-datepicker-schedule]").length&&($(".daterangepicker").remove(),$("[smspilot-datepicker-schedule]").daterangepicker({opens:"left",timePicker:!0,singleDatePicker:!0,locale:{format:"MM/DD/YYYY hh:mm A",customRangeLabel:lang_date_custom}}))},autocomplete:()=>{$("[smspilot-autocomplete]").length&&($(".autocomplete-suggestions").remove(),$.get(site_url+"/ajax/autocomplete/"+(!!$("[smspilot-autocomplete]").attr("smspilot-autocomplete")&&$("[smspilot-autocomplete]").attr("smspilot-autocomplete")),function(e){try{switch((e=JSON.parse(e)).status){case 200:$("[smspilot-autocomplete]").autocomplete({lookup:e.data,onSelect:function(e){$(this).val(e.data)}});break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}}))},select:()=>{$("[smspilot-form] select").length&&$("[smspilot-form] select").selectpicker(),$("[smspilot-select-template]").length&&$("[smspilot-select-template]").on("changed.bs.select",function(e,t,a,n){var r=$(this).find("option:selected"),s=!!r.data("format")&&r.data("format");s?$("textarea[name=message]").val(s):$("textarea[name=message]").val("")}),$("[smspilot-select-devices]").length&&$("[smspilot-select-devices]").on("changed.bs.select",function(e,t,a,n){var r,s=$(this).find("option:selected");if("0"==s[0].value)for(r=0;r<s.length;r++)"0"!=s[r].value&&(s[r].selected=!1);$("[smspilot-select-devices]").selectpicker("refresh")})},pages:()=>{$(document).on("click","[smspilot-page]",function(e){var t=$(this).attr("smspilot-page").split("/");t.length>1&&pjax.loadUrl(site_url+"/pages/"+t[0]+"/"+t[1])})},build:()=>{$(document).on("click","[smspilot-build]",function(e){$.get(site_url+"/ajax/index/build",function(e){try{switch((e=JSON.parse(e)).status){case 200:alert.success(e.message);break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}})})},delete:()=>{$(document).on("click","[smspilot-delete]",function(e){e.preventDefault();var t=!!$(this).attr("smspilot-delete")&&$(this).attr("smspilot-delete");iziToast.question({title:lang_delete_title,message:lang_delete_tagline,titleLineHeight:"25px",backgroundColor:"linear-gradient(30deg, rgb(197, 23, 23), rgb(255, 125, 33))",position:"center",icon:!1,drag:!1,timeout:!1,close:!1,overlay:!0,layout:1,zindex:1024,buttons:[['<button class="text-white">'+lang_btn_confirm+"</button>",function(e,a,n,r,s){$.ajax({url:site_url+"/ajax/delete/"+t,type:"GET",beforeSend:function(){e.hide({transitionOut:"fadeOut"},a,"button")},success:function(e){try{switch((e=JSON.parse(e)).status){case 200:e.data.vars.table&&smspilot.tables(e.data.vars.table),alert.success(e.message);break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}}})},!0],['<button class="text-white">'+lang_btn_cancel+"</button>",function(e,t,a,n){e.hide({transitionOut:"fadeOut"},t,"button")}]]})})},charts:e=>{parent.jQuery.get(parent.site_url+"/ajax/chart/"+e,function(e){try{e=JSON.parse(e);window.apex=new ApexCharts(document.querySelector("#chart"),{chart:{type:"area",height:300,foreColor:"#999",stacked:!0,dropShadow:{enabled:!0,enabledSeries:[0],top:-2,left:2,blur:5,opacity:.06},toolbar:{show:!0,tools:{download:!1}}},colors:e.data.vars.colors,stroke:{curve:"smooth",width:4},dataLabels:{enabled:!1},series:e.data.vars.series,markers:{size:0,strokeColor:"#fff",strokeWidth:3,strokeOpacity:1,fillOpacity:1,hover:{size:6}},xaxis:{type:"datetime",axisBorder:{show:!1},axisTicks:{show:!1},labels:{datetimeUTC:!1}},yaxis:{labels:{offsetX:-10,offsetY:0},tooltip:{enabled:!0}},grid:{padding:{left:-5,right:5}},tooltip:{x:{format:"MMMM dd yyyy"}},legend:{position:"top",horizontalAlign:"left"},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,90,100]}}}),apex.render()}catch(e){parent.alert.danger(parent.lang_response_went_wrong)}})},tables:e=>{$.get(site_url+"/table/"+e,function(e){try{e=JSON.parse(e);switch($.fn.DataTable.isDataTable("[smspilot-table]")&&$("[smspilot-table]").DataTable().destroy(),smspilot.clipboard(!0),e.status){case 200:$("[smspilot-table]").on("error.dt",()=>{alert.danger(lang_response_went_wrong)}).DataTable({data:e.data.data,lengthMenu:[10,25,50,75,100],pageLength:10,sPaginationType:"full_numbers",oLanguage:{sSearch:'<i class="la la-search"></i> '+e.data.search.text,sSearchPlaceholder:e.data.search.placeholder},aaSorting:[[0,"desc"]],columns:e.data.columns,language:{infoPostFix:"",processing:lang_datatable_processing,lengthMenu:lang_datatable_length,info:lang_datatable_info,infoEmpty:lang_datatable_empty,infoFiltered:lang_datatable_filtered,loadingRecords:lang_datatable_loading,zeroRecords:lang_datatable_zero,emptyTable:lang_datatable_null,paginate:{first:lang_datatable_first,previous:lang_datatable_prev,next:lang_datatable_next,last:lang_datatable_last}}}),smspilot.clipboard();break;case 302:alert.warning(e.message,!0)}}catch(e){alert.danger(lang_response_went_wrong)}})},tabs:(e=!0,t=!0)=>{e&&$(document).on("click","[smspilot-tab]",function(e){e.preventDefault(),topbar.show(),$.get(site_url+"/widget/tab/dashboard/"+(!!$(this).attr("smspilot-tab")&&$(this).attr("smspilot-tab")),e=>{try{switch((e=JSON.parse(e)).status){case 200:$("[smspilot-tab]").removeClass("active"),$("smspilot-tab-content").html(e.data.tpl),$("smspilot-tab-content").children(":first").addClass("animated fadeIn"),$(this).addClass("active"),e.data.vars.table&&smspilot.tables(e.data.vars.table),smspilot.ripple(),smspilot.select(),smspilot.iframe();break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}topbar.hide()})}),t&&$("[smspilot-tab-default]").each(function(e){e<1&&$.get(site_url+"/widget/tab/dashboard/"+(!!$(this).attr("smspilot-tab")&&$(this).attr("smspilot-tab")),e=>{try{switch((e=JSON.parse(e)).status){case 200:$("smspilot-tab-content").html(e.data.tpl),$("smspilot-tab-content").children(":first").addClass("animated fadeIn"),e.data.vars.table&&smspilot.tables(e.data.vars.table),smspilot.select(),smspilot.ripple(),smspilot.iframe();break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}})})},stripe:e=>{stripe.createToken(cardElement).then(function(t){t.error?alert.danger("Invalid card details!"):(e.append("stripe_token",t.token.id),$.ajax({url:site_url+"/ajax/update/payment",type:"POST",data:e,contentType:!1,processData:!1,beforeSend:()=>{smspilot.disabled()},success:e=>{try{switch((e=JSON.parse(e)).status){case 200:$("smspilot-modal").modal("hide"),alert.success(e.message);break;case 302:$("smspilot-modal").modal("hide"),alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}smspilot.disabled(!1)}}))})},modals:()=>{$("body").append('<smspilot-modal class="modal fade">\n                <div class="modal-dialog" role="document">\n                    <smspilot-modal-content></smspilot-modal-content>\n                </div>\n            </smspilot-modal>').ready(()=>{$(document).on("click","[smspilot-toggle]",function(e){e.preventDefault(),topbar.show(),$.get(site_url+"/widget/modal/"+template+"/"+(!!$(this).attr("smspilot-toggle")&&$(this).attr("smspilot-toggle"))+"?_="+(new Date).getTime(),e=>{try{switch((e=JSON.parse(e)).status){case 200:if($("smspilot-modal").removeClass("left right"),$("smspilot-modal .modal-dialog").removeClass("modal-dialog-centered modal-sm modal-md modal-lg modal-xl"),e.data.vars.position?$("smspilot-modal").addClass(e.data.vars.position):$("smspilot-modal .modal-dialog").addClass("modal-dialog-centered"),e.data.vars.size?$("smspilot-modal .modal-dialog").addClass("modal-"+e.data.vars.size):$("smspilot-modal .modal-dialog").addClass("modal-sm"),$("smspilot-modal-content").html(e.data.tpl),$("smspilot-modal").modal({backdrop:"static",keyboard:!1}),e.data.vars.iframe&&smspilot.iframe(),smspilot.ripple(),e.data.vars.type){if(smspilot.autocomplete(),smspilot.datepicker(),smspilot.creditcard(),smspilot.codeflask(),smspilot.select(),e.data.vars.stripe){window.stripe=Stripe(stripe_key);var t=stripe.elements(),a={base:{fontWeight:500,fontFamily:"'Rubik', sans-serif",fontSize:"16px"}};window.cardElement=t.create("cardNumber",{style:a}),cardElement.mount("#card-number"),t.create("cardExpiry",{style:a}).mount("#card-expiry"),t.create("cardCvc",{style:a}).mount("#card-cvc")}$("[smspilot-form]").on("submit",function(t){t.preventDefault();var a=new FormData(this);e.data.vars.id&&a.append("id",e.data.vars.id),window.codeflask&&(a.append("content",codeflask.getCode()),delete window.codeflask),e.data.vars.stripe?smspilot.stripe(a):$.ajax({url:site_url+"/ajax/"+e.data.vars.type+"/"+e.data.vars.tpl,type:"POST",data:a,contentType:!1,processData:!1,beforeSend:()=>{if(e.data.vars.require)for(var t=e.data.vars.require.split("<=>"),n=0;n<=t.length;n++){if(void 0!==t[n])var r=t[n].split("|");try{if(a.get(r[0]).length<1)return alert.warning(r[1]+", "+lang_validate_cannotemp),!1}catch(e){if(a.getAll(r[0]+"[]").length<1)return alert.warning(r[1]+", "+lang_validate_cannotemp),!1}}smspilot.disabled()},success:t=>{try{switch((t=JSON.parse(t)).status){case 200:e.data.vars.table&&smspilot.tables(e.data.vars.table),$("smspilot-modal").modal("hide"),alert.success(t.message);break;case 301:$("smspilot-modal").modal("hide"),alert.success(t.message,!0);break;case 302:$("smspilot-modal").modal("hide"),alert.warning(t.message,!0);break;case 303:alert.warning(t.message),setTimeout(()=>{smspilot.redirect(t.data)},3e3);break;default:e.data.vars.recaptcha&&grecaptcha.reset(),alert.danger(t.message)}}catch(e){alert.danger(lang_response_went_wrong)}smspilot.disabled(!1)}})})}break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}topbar.hide()})})})}},window.alert={setup:()=>{iziToast.settings({title:lang_alert_attention,titleSize:"18px",titleLineHeight:"25px",messageSize:"17px",icon:!1,timeout:2e3,animateInside:!0,titleColor:"#f5f5f5",messageColor:"#f5f5f5",iconColor:"#f5f5f5",transitionIn:"fadeInRight",transitionOut:"fadeOutRight",position:"topLeft",displayMode:"replace",layout:2,maxWidth:"300px",close:!1})},primary:(e,t=!1)=>{iziToast.info({backgroundColor:"linear-gradient(30deg, rgb(16, 107, 181), rgb(79, 193, 238))",message:e,onClosed:()=>{t&&location.reload()}})},success:(e,t=!1)=>{iziToast.success({backgroundColor:"linear-gradient(30deg, rgb(74, 117, 16), rgb(51, 199, 55))",message:e,onClosed:()=>{t&&location.reload()}})},warning:(e,t=!1)=>{iziToast.warning({backgroundColor:"linear-gradient(30deg, rgb(179, 103, 24), rgb(243, 168, 32))",message:e,onClosed:()=>{t&&location.reload()}})},danger:(e,t=!1)=>{iziToast.error({backgroundColor:"linear-gradient(30deg, rgb(197, 23, 23), rgb(255, 125, 33))",message:e,onClosed:()=>{t&&location.reload()}})}},window.titansys={chat:()=>{$.get(site_url+"/ajax/index/livechat",function(e){try{if(200==(e=JSON.parse(e)).status){var t=t||{};t.visitor={name:e.data};new Date;a=document.createElement("script"),n=document.getElementsByTagName("script")[0],a.async=!0,a.src="https://embed.tawk.to/5ead66fc10362a7578be5356/default",a.charset="UTF-8",a.setAttribute("crossorigin","*"),n.parentNode.insertBefore(a,n)}}catch(e){alert.danger(lang_response_went_wrong)}var a,n})},forums:()=>{$(document).on("click","[smspilot-forums]",function(e){$.get(site_url+"/ajax/index/forums",function(e){try{switch((e=JSON.parse(e)).status){case 200:alert.success(e.message),setTimeout(()=>{smspilot.redirect(e.data)},3e3);break;case 302:alert.warning(e.message,!0);break;default:alert.danger(e.message)}}catch(e){alert.danger(lang_response_went_wrong)}})})}};
